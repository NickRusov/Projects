
@using System.Web.Mvc.Ajax;
@using FLS.LocalWiki.Models.Entities
@using FLS.LocalWiki.WebApplication.Models

@model ArticleViewModel
@{
    Layout = null;
}

<html @*xmlns="http://www.w3.org/1999/xhtml"*@ >
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Reading Articles</title>

</head>

<body>
        <p>@Model.Article.Title</p>
        <p>@Model.Article.Author.FirstName @Model.Article.Author.LastName</p>
        <p>@Model.Article.Text</p>
        <p>Average rating: @Model.Article.AverageRating</p>
        <table> @foreach (var comment in Model.Article.Comments)
                {
                    <tr>
                        <td>
                            <p>@comment</p>
                        </td>
                    </tr>
                }
        </table>
    <table> @foreach (var rating in Model.Article.Ratings)
            {
                <tr>
                    <td>
                        <p>@rating</p>
                    </td>
                </tr>
            }
    </table>
    
<script src="@Url.Content("~/Scripts/jquery-2.1.4.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>

   
    @using (Html.BeginForm("AddComment", "Article", FormMethod.Post))
    {
    @* //new AjaxOptions { UpdateTargetId = "commentList" }))*@

            <div>
                @Html.Hidden("articleId", Model.Article.Id)
                @Html.Editor("comment")

                @*@Html.Editor("articleId")*@
                @*@Html.EditorFor(m => m.NewComment.Comment)
                @Html.HiddenFor(m => m.Article.Id)
                @Html.HiddenFor(m => m.NewComment.UserId)*@
            </div>
        
            <div>
            <input type="submit" value="Add comment" />  
            </div>
    }

    @*<script src="@Url.Content("~/App_Code/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>*@
        
    @*@Html.Partial("~/Views/Article/Comments.cshtml", new PartialComments(Model.Id));
        @Html.Action("AddComment", "Article", Model.Id);*@
    <div id='commentList'>
        @{
            //Html.RenderAction("AddComment","Article");
            //Html.RenderPartial("~/Views/Article/Comments.cshtml", new NewComment(1,Model.Id,"initial comment"));
         }
    </div>
</body>
</html>
